(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,160],{3732:function(e,t,l){Promise.resolve().then(l.t.bind(l,9032,23)),Promise.resolve().then(l.bind(l,7920)),Promise.resolve().then(l.bind(l,8970)),Promise.resolve().then(l.bind(l,1254)),Promise.resolve().then(l.bind(l,4247)),Promise.resolve().then(l.bind(l,6672)),Promise.resolve().then(l.bind(l,4856)),Promise.resolve().then(l.bind(l,6852)),Promise.resolve().then(l.bind(l,912)),Promise.resolve().then(l.bind(l,1481))},4247:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return y}});var r=l(7437),o=l(2265),a=l(1254),n=l(4856),s=l(9518),i=l(4762),d=l(8949),c=l(7818),u=l(2170),h=l.n(u),b=l(7850),p=l(6558);let x=(0,c.default)(()=>l.e(270).then(l.bind(l,7270)),{loadableGenerated:{webpack:()=>[7270]},ssr:!1});var g=e=>{let{storeData:t,clearData:l,jsonData:a}=e,[n,c]=(0,o.useState)(null),{isRaw:u,isMap:g}=(0,s.P)(),{selectedChartType:f}=(0,b._)(),y=(0,s.$)(),m=h()(e=>{try{let t=(0,p.x0)(e);y({type:"SET_EDITED",payload:!0}),y({type:u?"UPDATE_RAW":"UPDATE_CHART",chartType:f,payload:t}),g&&y({type:"UPDATE_MAP",payload:t})}catch(e){console.error("Invalid JSON:",e)}},1e3),v=e=>{let t="Something went wrong";c(t),setTimeout(()=>{c(null)},1e3),console.error(t,e)};return(0,r.jsxs)("div",{className:"relative w-full h-[calc(100vh-20px)]",children:[(0,r.jsxs)("div",{className:"absolute top-2 right-2 z-[99] flex gap-2",children:[(0,r.jsxs)("a",{href:u?"https://echarts.apache.org/en/option.html#title":"https://github.com/akvo/akvo-charts/blob/main/README.md",target:"_blank",className:"flex items-center gap-2 px-4 py-1 bg-white hover:bg-gray-200 rounded shadow-md",rel:"noreferrer","data-testid":"link-rtd",children:[(0,r.jsx)(i.KN,{}),(0,r.jsx)("span",{children:"Read Docs"})]}),!g&&(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-white rounded shadow-md",children:[(0,r.jsx)("input",{type:"checkbox",id:"raw",onChange:()=>{y({type:"RAW"})},checked:u}),(0,r.jsx)("label",{htmlFor:"raw",className:"mx-1",children:"Raw"})]}),(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-4 py-1 bg-white hover:bg-gray-200 rounded shadow-md",onClick:()=>{try{l(),c("Configuration cleared successfully"),setTimeout(()=>{c(null)},1e3)}catch(e){v(e)}},children:[(0,r.jsx)(i.XH,{}),(0,r.jsx)("span",{children:"Clear"})]}),(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-4 py-1 text-white bg-blue-600 hover:bg-blue-700 rounded shadow-md",onClick:()=>{try{t(),c("Configuration successfully saved"),setTimeout(()=>{c(null)},1e3)}catch(e){v(e)}},children:[(0,r.jsx)(i.nQ,{}),(0,r.jsx)("span",{children:"Save"})]})]}),(0,r.jsx)(x,{theme:"vs-dark",language:"javascript",value:"option = ".concat((0,p.yp)(a)),onChange:m}),(0,r.jsx)(d.Z,{show:!!n,children:n})]})},f=l(5858),y=()=>{let{isRaw:e,isMap:t,rawConfig:l,defaultConfig:i,chartConfig:d,mapConfig:c}=(0,s.P)(),{selectedChartType:u,fullScreen:h}=(0,b._)(),[x,y]=(0,o.useState)(!0),[m,v]=(0,o.useState)(!0),[j,w]=(0,o.useState)("json-editor"),[T,_]=(0,p._)("defaultConfig",i),[C,E]=(0,p._)("rawConfig",l),[N,P]=(0,p._)("mapConfig",c),k=(0,s.$)(),A=(0,o.useMemo)(()=>{let r={...i,config:{horizontal:!1,...i.config},data:f.WB};if(f.wt.includes(u)||(r={...r,data:f.qd}),u===f.f5.SCATTER_PLOT&&(r={...r,data:f.px}),f.bq.includes(u)){let e={...r};delete e.config.horizontal,r=e}if(f.$c.includes(u)){let e={...r};delete e.stackMapping,r=e}f.$c.includes(u)||(r={...r,stackMapping:f.FT});let o=e?(null==l?void 0:l[u])||{}:(null==d?void 0:d[u])||r;return t?c:o},[i,d,t,e,c,l,u]),D=(0,o.useCallback)(()=>{x&&(y(!1),k({type:"UPDATE_RAW",payload:C}),k({type:"SET_CHARTS",payload:T})),t&&m&&(v(!1),k({type:"UPDATE_MAP",payload:N}))},[k,C,T,x,m,t,N]);return((0,o.useEffect)(()=>{D()},[D]),h)?null:(0,r.jsxs)("div",{className:"w-full lg:w-1/2 h-[calc(100vh-20px)] flex flex-col gap-0",children:[(0,r.jsxs)("div",{className:"w-full lg:max-w-[845px] flex border-b border-gray-300 bg-gray-200",children:[(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("json-editor"===j?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>w("json-editor"),children:"Option"}),(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("json"===j?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>w("json"),children:"JSON"}),(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("code"===j?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>w("code"),children:"Code"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["json"===j&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(n.default,{jsonData:A})}),"json-editor"===j&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(g,{storeData:()=>{t?P(c):e?E(l):_({...T,[u]:(null==d?void 0:d[u])||i})},clearData:()=>{k({type:"SET_EDITED",payload:!1}),t&&k({type:"RESET_MAP"}),k({type:"CLEAR_CHART",chartType:u}),_({...d,[u]:null}),E({...l,[u]:null}),P(null)},jsonData:A})}),"code"===j&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(a.default,{jsonData:A,isRaw:e,isMap:t})})]})]})}},9032:function(){}},function(e){e.O(0,[403,377,39,299,526,425,971,23,744],function(){return e(e.s=3732)}),_N_E=e.O()}]);