(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931,160],{7084:function(e,t,l){Promise.resolve().then(l.t.bind(l,9032,23)),Promise.resolve().then(l.bind(l,7920)),Promise.resolve().then(l.bind(l,8970)),Promise.resolve().then(l.bind(l,1254)),Promise.resolve().then(l.bind(l,4247)),Promise.resolve().then(l.bind(l,6672)),Promise.resolve().then(l.bind(l,4856)),Promise.resolve().then(l.bind(l,6852)),Promise.resolve().then(l.bind(l,912)),Promise.resolve().then(l.bind(l,1481))},4247:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return f}});var r=l(7437),o=l(2265),a=l(1254),n=l(4856),s=l(9518),i=l(4762),d=l(8949),c=l(7818),u=l(2170),h=l.n(u),b=l(7850),p=l(6558);let x=(0,c.default)(()=>l.e(270).then(l.bind(l,7270)),{loadableGenerated:{webpack:()=>[7270]},ssr:!1});var y=e=>{let{storeData:t,clearData:l,jsonData:a}=e,[n,c]=(0,o.useState)(null),{isRaw:u,isMap:y,customMap:g}=(0,s.P)(),{selectedChartType:f}=(0,b._)(),m=(0,s.$)(),v=(0,b.e)(),j=()=>{v({type:"RERENDER_TRUE"}),setTimeout(()=>{v({type:"RERENDER_FALSE"})},100)},E=h()(e=>{try{let t=(0,p.x0)(e);m({type:"SET_EDITED",payload:!0}),m({type:u?"UPDATE_RAW":"UPDATE_CHART",chartType:f,payload:t}),y&&((null==g?void 0:g[f])?m({type:"UPDATE_CUSTOM_MAP",chartType:f,payload:t}):m({type:"UPDATE_MAP",payload:t})),j()}catch(e){console.error("Invalid JSON:",e)}},1e3),T=e=>{let t="Something went wrong";c(t),setTimeout(()=>{c(null)},1e3),console.error(t,e)};return(0,r.jsxs)("div",{className:"relative w-full h-[calc(100vh-20px)]",children:[(0,r.jsxs)("div",{className:"absolute top-2 right-2 z-[99] flex gap-2",children:[(0,r.jsxs)("a",{href:u?"https://echarts.apache.org/en/option.html#title":"https://github.com/akvo/akvo-charts/blob/main/README.md",target:"_blank",className:"flex items-center gap-2 px-4 py-1 bg-white hover:bg-gray-200 rounded shadow-md",rel:"noreferrer","data-testid":"link-rtd",children:[(0,r.jsx)(i.KN,{}),(0,r.jsx)("span",{children:"Read Docs"})]}),!y&&(0,r.jsxs)("div",{className:"flex items-center px-3 py-1 bg-white rounded shadow-md",children:[(0,r.jsx)("input",{type:"checkbox",id:"raw",onChange:()=>{m({type:"RAW"})},checked:u}),(0,r.jsx)("label",{htmlFor:"raw",className:"mx-1",children:"Raw"})]}),(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-4 py-1 bg-white hover:bg-gray-200 rounded shadow-md",onClick:()=>{try{l(),c("Configuration cleared successfully"),setTimeout(()=>{c(null)},1e3),j()}catch(e){T(e)}},children:[(0,r.jsx)(i.XH,{}),(0,r.jsx)("span",{children:"Clear"})]}),(0,r.jsxs)("button",{type:"button",className:"flex items-center gap-2 px-4 py-1 text-white bg-blue-600 hover:bg-blue-700 rounded shadow-md",onClick:()=>{try{t(),c("Configuration successfully saved"),setTimeout(()=>{c(null)},1e3),j()}catch(e){T(e)}},children:[(0,r.jsx)(i.nQ,{}),(0,r.jsx)("span",{children:"Save"})]})]}),(0,r.jsx)(x,{theme:"vs-dark",language:"javascript",value:"option = ".concat((0,p.yp)(a)),onChange:E}),(0,r.jsx)(d.Z,{show:!!n,children:n})]})},g=l(5858),f=()=>{let{isRaw:e,isMap:t,rawConfig:l,defaultConfig:i,chartConfig:d,mapConfig:c,customMap:u}=(0,s.P)(),{selectedChartType:h,fullScreen:x}=(0,b._)(),[f,m]=(0,o.useState)(!0),[v,j]=(0,o.useState)(!0),[E,T]=(0,o.useState)("json-editor"),[_,w]=(0,p._)("defaultConfig",i),[C,P]=(0,p._)("rawConfig",l),[N,A]=(0,p._)("mapConfig",c),[k,R]=(0,p._)("customMap",u),S=(0,s.$)(),D=(0,o.useMemo)(()=>{let r={...i,config:{horizontal:!1,...i.config},data:g.WB};if(g.wt.includes(h)||(r={...r,data:g.qd}),h===g.f5.SCATTER_PLOT&&(r={...r,data:g.px}),g.bq.includes(h)){let e={...r};delete e.config.horizontal,r=e}if(g.$c.includes(h)){let e={...r};delete e.stackMapping,r=e}g.$c.includes(h)||(r={...r,stackMapping:g.FT});let o=e?(null==l?void 0:l[h])||{}:(null==d?void 0:d[h])||r;return t?(null==u?void 0:u[h])||c:o},[i,d,t,e,c,u,l,h]),M=(0,o.useCallback)(()=>{f&&(m(!1),S({type:"UPDATE_RAW",payload:C}),S({type:"SET_CHARTS",payload:_})),t&&v&&(j(!1),S({type:"UPDATE_MAP",payload:N}),S({type:"SET_CUSTOM_MAP",payload:k}))},[S,C,_,f,v,t,N,k]);return((0,o.useEffect)(()=>{M()},[M]),x)?null:(0,r.jsxs)("div",{className:"w-full lg:w-1/2 h-[calc(100vh-20px)] flex flex-col gap-0",children:[(0,r.jsxs)("div",{className:"w-full lg:max-w-[845px] flex border-b border-gray-300 bg-gray-200",children:[(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("json-editor"===E?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>T("json-editor"),children:"Option"}),(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("json"===E?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>T("json"),children:"JSON"}),(0,r.jsx)("button",{className:"flex-1 py-2 px-4 text-center border-r border-gray-300 last:border-r-0 focus:outline-none transition-colors ".concat("code"===E?"bg-white border-b-2 border-blue-500 text-blue-600":"bg-gray-200 hover:bg-gray-300 text-gray-600"),onClick:()=>T("code"),children:"Code"})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto",children:["json"===E&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(n.default,{jsonData:D})}),"json-editor"===E&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(y,{storeData:()=>{t?(A(c),(null==u?void 0:u[h])&&R({...k,[h]:u[h]})):e?P(l):w({..._,[h]:(null==d?void 0:d[h])||i})},clearData:()=>{S({type:"SET_EDITED",payload:!1}),t&&(S({type:"RESET_MAP"}),S({type:"RESET_CUSTOM_MAP",chartType:h})),S({type:"CLEAR_CHART",chartType:h}),w({...d,[h]:null}),P({...l,[h]:null}),A(null)},jsonData:D})}),"code"===E&&(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(a.default,{jsonData:D,isRaw:e,isMap:t})})]})]})}},9032:function(){}},function(e){e.O(0,[403,647,39,683,526,425,971,23,744],function(){return e(e.s=7084)}),_N_E=e.O()}]);